# 개발 과정 대화 요약

**작성일**: 2025년 11월 17일
**프로젝트**: Board with Vibe - 회원 전용 게시판

---

## 프롬프트 1
프로젝트 계획 수립 요청
- 회원 전용 게시판 프로젝트 계획 수립
- Java 17, TypeScript, H2 데이터베이스 사용
- backend/frontend 폴더 분리
- 회원가입/로그인 → 게시판 접근 구조
- 댓글/파일업로드 제외, 페이징은 10개씩

### 답변 요약 1
프로젝트 구조 및 기술 스택 제안
- 백엔드: Spring Boot 3.x + Java 17 + Spring Security + JWT + H2
- 프론트엔드: React 18 + TypeScript 5 + React Router + Axios
- API 설계: 인증 API 2개, 게시글 API 5개
- 7단계 구현 순서 제시 (백엔드 인증 → 게시판 → 프론트엔드 인증 → 게시판)

---

## 프롬프트 2
Spring Boot 버전 수정 및 구현 시작 요청
- Spring Boot 버전을 3.5.7로 지정
- 제안된 계획대로 진행 요청

### 답변 요약 2
전체 프로젝트 구현 완료
- **백엔드**: Spring Boot 3.5.7 프로젝트 생성, User/Post 엔티티, JWT 인증, CRUD API 구현
- **프론트엔드**: React + TypeScript 프로젝트 생성, AuthContext, 로그인/회원가입 컴포넌트, 게시판 UI 구현
- **스타일링**: CSS로 모던한 UI 디자인 적용
- README.md 작성으로 실행 방법 안내

---

## 프롬프트 3
npm install 오류 해결 요청
- TypeScript 버전 충돌 오류 (react-scripts@5.0.1이 TypeScript 4.x 요구)

### 답변 요약 3
TypeScript 버전 다운그레이드로 해결
- package.json의 TypeScript 버전을 5.3.3 → 4.9.5로 변경
- npm install 성공적으로 완료
- 호환성 문제 해결

---

## 프롬프트 4
게시판 UI 개선 요청
- 게시글 0개일 때 에러 메시지 대신 친근한 메시지 표시
- 스크롤 무관하게 우하단에 고정된 글쓰기 버튼 추가

### 답변 요약 4
빈 게시판 UI 및 플로팅 버튼 구현
- 게시글 0개 시 "첫 게시글의 주인공이 되어보세요!" 메시지와 큰 버튼 표시
- 우하단 고정 플로팅 버튼 추가 (원형, 호버 애니메이션)
- CSS 스타일링 적용

---

## 프롬프트 5
CORS 오류 해결 요청
- XMLHttpRequest 차단 문제 (Access-Control-Allow-Origin 헤더 없음)

### 답변 요약 5
Spring Security CORS 설정 추가
- SecurityConfig에 `corsConfigurationSource()` 빈 생성
- `.cors()` 설정을 SecurityFilterChain에 명시적으로 추가
- localhost:3000에서의 모든 요청 허용
- 문제 해결

---

## 프롬프트 6
조회수 2배 증가 문제 해결 요청
- 페이지 로드마다 조회수가 2회씩 증가하는 문제

### 답변 요약 6
useRef로 중복 방지 로직 추가
- `viewedPostIds` useRef로 조회한 게시글 ID 추적
- Set 자료구조 사용하여 중복 체크
- React StrictMode에서도 작동하도록 구현

---

## 프롬프트 7
새로고침 시 목록페이지로 이동하는 문제 분석 요청
- 게시글 상세 페이지에서 새로고침 시 목록으로 리다이렉트됨

### 답변 요약 7
AuthContext 초기화 타이밍 문제 해결
- 문제 원인: 새로고침 시 `user` 상태가 null로 초기화되어 인증 실패로 판단
- 해결: AuthContext에 `isLoading` 상태 추가
- ProtectedRoute에서 로딩 완료 후 인증 확인
- localStorage에서 토큰 복원 완료 후 라우팅 결정

---

## 프롬프트 8
PostDetail.tsx 재작성 요청 (조회수 문제 재발)
- useRef를 사용한 중복 방지 메커니즘을 처음부터 재작성

### 답변 요약 8
PostDetail 컴포넌트 완전 재작성
- `viewedPostIds` Set 자료구조로 변경
- API 호출 전 조회 여부 확인
- 이미 조회한 게시글은 API 호출 스킵
- 세션 내 캐싱 적용

---

## 프롬프트 9
조회수 문제 근본 해결 요청
- 여전히 조회수 2배 증가 문제 발생
- 전문가 분석을 토대로 코드 재수정 요청

### 답변 요약 9
조회수 API 분리 방식으로 완전 해결
- **백엔드**: `getPost()`에서 조회수 증가 로직 제거, `incrementViewCount()` 별도 메서드 생성
- **컨트롤러**: `POST /api/posts/{id}/view` 엔드포인트 추가
- **프론트엔드**: 두 개의 독립적인 useEffect 사용
  - 첫 번째: 게시글 데이터 가져오기
  - 두 번째: 조회수 증가 (fire-and-forget)
- API 호출 전 플래그 즉시 설정하여 중복 방지
- React StrictMode에서도 완벽하게 작동

---

## 프롬프트 10
개발 내역 문서화 요청
- 개발환경, 개발목표, 세부 구현사항을 문서화
- 회원가입, 로그인, 게시판 3가지 기능별 세부사항 정리
- docs/251117_개발내역.md 파일로 생성

### 답변 요약 10
개발 문서 작성 완료
- 개발 환경 설정 (백엔드/프론트엔드 기술 스택)
- 개발 목표 및 구현 내용
  - 회원가입: 7개 세부 구현사항
  - 로그인: 10개 세부 구현사항
  - 게시판: 5개 주요 기능 + 각 세부 구현사항
- 주요 기술적 해결 사항 4가지
- API 엔드포인트 표로 정리
- 실행 방법 및 향후 개선 사항

---

## 프롬프트 11
개발 과정 대화 요약 문서화 요청
- 프롬프트와 답변을 순서대로 요약
- docs 폴더에 md 파일로 출력

### 답변 요약 11
(현재 문서)

---

## 주요 성과

### 구현된 기능
✅ JWT 기반 회원가입/로그인
✅ 게시글 CRUD (작성, 조회, 수정, 삭제)
✅ 페이지네이션 (10개/페이지, 한국형 UI)
✅ 조회수 자동 증가 (중복 방지)
✅ 권한 검증 (본인 게시글만 수정/삭제)
✅ 반응형 UI 및 플로팅 버튼

### 해결한 기술적 문제
✅ TypeScript 의존성 충돌
✅ CORS 설정 문제
✅ 조회수 중복 증가 (API 분리로 해결)
✅ 새로고침 시 인증 유지

### 개발 시간
약 1회의 세션에서 전체 프로젝트 완성

---

## 교훈 및 개선점

### 잘된 점
- 명확한 요구사항 정의로 빠른 개발 진행
- 문제 발생 시 근본 원인 분석 후 해결
- 백엔드/프론트엔드 분리로 깔끔한 구조

### 개선 가능 사항
- 초기부터 조회수 API 분리 설계 고려
- React StrictMode의 영향을 미리 고려한 설계
- 프로덕션 환경을 위한 보안 강화 필요
