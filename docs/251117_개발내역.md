# 회원 전용 게시판 개발 내역

**작성일**: 2025년 11월 17일
**프로젝트명**: Board with Vibe

---

## 개발 환경 설정

### 백엔드
- **프레임워크**: Spring Boot 3.5.7
- **언어**: Java 17
- **데이터베이스**: H2 Database (인메모리)
- **보안**: Spring Security + JWT
- **빌드 도구**: Maven
- **포트**: 8080

### 프론트엔드
- **프레임워크**: React 18.2.0
- **언어**: TypeScript 4.9.5
- **라우팅**: React Router 6.21.0
- **HTTP 클라이언트**: Axios 1.6.2
- **상태 관리**: Context API
- **포트**: 3000

### 프로젝트 구조
```
board-with-vibe/
├── backend/          # Spring Boot 백엔드
└── frontend/         # React + TypeScript 프론트엔드
```

---

## 개발 목표 및 구현 내용

### 1. 회원가입
사용자 등록 및 계정 생성 기능 구현

#### 세부 구현사항
- 회원가입 폼 컴포넌트 구현 (아이디, 비밀번호, 닉네임, 이메일)
- 입력값 검증 (아이디 4자 이상, 비밀번호 6자 이상, 이메일 형식 검증)
- 중복 아이디/이메일 체크 로직
- 비밀번호 BCrypt 암호화 저장
- 회원가입 성공 시 로그인 페이지로 전환
- User 엔티티 생성 (username, password, nickname, email, 생성일, 수정일)
- JPA Auditing을 통한 자동 타임스탬프 관리

### 2. 로그인
JWT 기반 인증 시스템 구현

#### 세부 구현사항
- 로그인 폼 컴포넌트 구현
- JWT 토큰 생성 및 발급 (만료시간 24시간)
- Spring Security 설정 (Stateless 세션 정책)
- JWT 인증 필터 구현 (요청 시 토큰 검증)
- 토큰을 localStorage에 저장 및 관리
- Axios 인터셉터로 자동 토큰 첨부
- 401 에러 시 자동 로그아웃 및 리다이렉트
- AuthContext를 통한 전역 인증 상태 관리
- ProtectedRoute로 인증 필요 페이지 보호
- 페이지 새로고침 시 인증 상태 유지

### 3. 게시판
게시글 CRUD 및 페이징 기능 구현

#### 세부 구현사항
- **게시글 목록**
  - 최신순 정렬 (createdAt DESC)
  - 페이지네이션 (10개/페이지, 한국형 페이지 번호 UI)
  - 번호, 제목, 작성자, 조회수, 작성일 표시
  - 제목 클릭 시 상세 페이지 이동
  - 빈 게시판 시 친화적 안내 메시지 표시

- **게시글 상세**
  - 조회수 자동 증가 (중복 방지 로직 적용)
  - 게시글 조회와 조회수 증가 API 분리
  - 작성자 정보 및 작성일시 표시
  - 본인 게시글만 수정/삭제 버튼 표시

- **게시글 작성**
  - 제목 및 내용 입력 폼
  - 제목 200자, 내용 제한 없음
  - 작성자 자동 매핑 (JWT 토큰에서 추출)
  - 우하단 플로팅 버튼으로 접근 (스크롤 무관 고정)

- **게시글 수정**
  - 본인 게시글만 수정 가능 (권한 검증)
  - 기존 내용 자동 로드
  - 제목 및 내용 수정 후 저장

- **게시글 삭제**
  - 본인 게시글만 삭제 가능 (권한 검증)
  - 삭제 확인 다이얼로그 표시
  - 삭제 후 목록 페이지로 이동

- **Post 엔티티 및 연관관계**
  - User와 ManyToOne 관계 설정
  - 제목, 내용, 조회수, 작성일, 수정일 관리

---

## 주요 기술적 해결 사항

### 1. CORS 문제 해결
- Spring Security에서 CORS 설정 추가
- `CorsConfigurationSource` 빈 생성하여 허용 오리진, 메서드, 헤더 설정

### 2. 조회수 중복 증가 방지
- 게시글 조회 API와 조회수 증가 API 분리
- 프론트엔드에서 `useRef`로 증가 여부 추적
- React StrictMode에서도 1회만 증가하도록 구현

### 3. 페이지 새로고침 시 인증 유지
- AuthContext에 `isLoading` 상태 추가
- localStorage에서 토큰 및 사용자 정보 복원
- ProtectedRoute에서 로딩 완료 후 인증 확인

### 4. TypeScript 의존성 충돌 해결
- react-scripts 5.0.1과 호환을 위해 TypeScript 4.9.5로 다운그레이드

---

## API 엔드포인트

### 인증 API
| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| POST | `/api/auth/signup` | 회원가입 | ❌ |
| POST | `/api/auth/login` | 로그인 (JWT 토큰 발급) | ❌ |

### 게시글 API
| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| GET | `/api/posts?page={page}&size={size}` | 게시글 목록 조회 (페이징) | ✅ |
| GET | `/api/posts/{id}` | 게시글 상세 조회 | ✅ |
| POST | `/api/posts/{id}/view` | 조회수 증가 | ✅ |
| POST | `/api/posts` | 게시글 작성 | ✅ |
| PUT | `/api/posts/{id}` | 게시글 수정 (본인만) | ✅ |
| DELETE | `/api/posts/{id}` | 게시글 삭제 (본인만) | ✅ |

---

## 실행 방법

### 백엔드 실행
```bash
cd backend
mvn spring-boot:run
```
- 서버: http://localhost:8080
- H2 콘솔: http://localhost:8080/h2-console

### 프론트엔드 실행
```bash
cd frontend
npm install
npm start
```
- 서버: http://localhost:3000

---

## 향후 개선 사항

### 제외된 기능 (추후 구현 가능)
- 댓글 기능
- 파일 업로드
- 게시글 검색
- 좋아요/북마크
- 사용자 프로필 페이지

### 개선 가능 항목
- 프로덕션 환경을 위한 DB 변경 (MySQL, PostgreSQL 등)
- JWT Refresh Token 구현
- 이메일 인증
- 관리자 권한 시스템
- 게시글 카테고리 분류
- 반응형 모바일 UI 최적화
